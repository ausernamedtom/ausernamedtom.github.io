class Car{constructor(e,t){this.x=e,this.y=t,this.width=30,this.height=50,this.speed=0,this.maxSpeed=5,this.acceleration=.2,this.friction=.05,this.angle=0,this.turnSpeed=.03}draw(e){e.save(),e.translate(this.x,this.y),e.rotate(this.angle),e.fillStyle="#4da6ff",e.fillRect(-this.width/2,-this.height/2,this.width,this.height),e.fillStyle="#16213e",e.fillRect(-this.width/2+5,-this.height/2+5,this.width-10,this.height/3),e.restore()}update(e){e.ArrowUp||e.w?this.speed+=this.acceleration:e.ArrowDown||e.s&&(this.speed-=this.acceleration),e.ArrowLeft||e.a?this.angle-=this.turnSpeed*Math.abs(this.speed):e.ArrowRight||e.d&&(this.angle+=this.turnSpeed*Math.abs(this.speed)),this.speed>0?this.speed-=this.friction:this.speed<0&&(this.speed+=this.friction),Math.abs(this.speed)<this.friction&&(this.speed=0),this.speed>this.maxSpeed?this.speed=this.maxSpeed:this.speed<-this.maxSpeed/2&&(this.speed=-this.maxSpeed/2),this.x+=Math.sin(this.angle)*this.speed,this.y-=Math.cos(this.angle)*this.speed}}class Road{constructor(){this.roadWidth=200,this.laneCount=3,this.laneWidth=this.roadWidth/this.laneCount}draw(e){e.strokeStyle="#0f3460",e.lineWidth=5,e.beginPath(),e.moveTo(0,0),e.lineTo(canvas.width,0),e.moveTo(0,canvas.height),e.lineTo(canvas.width,canvas.height),e.stroke(),e.strokeStyle="#4da6ff",e.lineWidth=2,e.setLineDash([20,20]);for(let t=1;t<this.laneCount;t++){const i=t*this.laneWidth;e.beginPath(),e.moveTo(i,0),e.lineTo(i,canvas.height),e.stroke()}e.setLineDash([])}}class Coin{constructor(e,t){this.x=e,this.y=t,this.radius=10,this.lifetime=3e3,this.spawnTime=Date.now(),this.collected=!1}draw(e){if(this.collected)return;e.beginPath(),e.arc(this.x,this.y,this.radius,0,2*Math.PI),e.fillStyle="#FFD700",e.fill(),e.strokeStyle="#DAA520",e.lineWidth=2,e.stroke()}update(){return Date.now()-this.spawnTime<this.lifetime&&!this.collected}}class Firework{constructor(e,t){this.x=e,this.y=t,this.particles=[],this.lifetime=1e3,this.spawnTime=Date.now();for(let e=0;e<20;e++){const t=Math.random()*2*Math.PI,i=Math.random()*3+2;this.particles.push({x:this.x,y:this.y,vx:Math.cos(t)*i,vy:Math.sin(t)*i,color:`hsl(${Math.random()*60+30},100%,50%)`})}}draw(e){this.particles.forEach(t=>{e.beginPath(),e.arc(t.x,t.y,3,0,2*Math.PI),e.fillStyle=t.color,e.fill()})}update(){return this.particles.forEach(e=>{e.x+=e.vx,e.y+=e.vy,e.vy+=.1}),Date.now()-this.spawnTime<this.lifetime}}const canvas=document.getElementById("gameCanvas"),ctx=canvas.getContext("2d");canvas.width=800,canvas.height=600;const car=new Car(canvas.width/2,canvas.height/2),road=new Road,coins=[],fireworks=[],keys={};let lastCoinSpawn=Date.now(),coinSpawnInterval=2e3,score=0,shakeOffset={x:0,y:0},lastShakeTime=0;window.addEventListener("keydown",e=>{keys[e.key]=!0}),window.addEventListener("keyup",e=>{keys[e.key]=!1});function animate(){ctx.clearRect(0,0,canvas.width,canvas.height),ctx.save(),ctx.translate(shakeOffset.x,shakeOffset.y),road.draw(ctx),ctx.font="24px Arial",ctx.fillStyle="#FFD700",ctx.fillText(`Score: ${score}`,20,40),Date.now()-lastCoinSpawn>coinSpawnInterval&&(coins.push(new Coin(Math.random()*(canvas.width-100)+50,Math.random()*(canvas.height-100)+50)),lastCoinSpawn=Date.now());for(let e=coins.length-1;e>=0;e--){const t=coins[e];t.draw(ctx);const i=t.x-car.x,n=t.y-car.y,o=Math.sqrt(i*i+n*n);o<t.radius+car.width/2&&(t.collected=!0,score+=10,fireworks.push(new Firework(t.x,t.y)),lastShakeTime=Date.now(),shakeOffset={x:(Math.random()-.5)*10,y:(Math.random()-.5)*10}),t.update()||coins.splice(e,1)}for(let e=fireworks.length-1;e>=0;e--){const t=fireworks[e];t.draw(ctx),t.update()||fireworks.splice(e,1)}car.update(keys),car.draw(ctx),Date.now()-lastShakeTime<200?shakeOffset={x:(Math.random()-.5)*10,y:(Math.random()-.5)*10}:shakeOffset={x:0,y:0},ctx.restore(),requestAnimationFrame(animate)}animate(); 